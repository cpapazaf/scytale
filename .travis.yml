sudo: required
dist: trusty

os:
- osx
- linux

addons:
  apt:
    packages:
    - build-essential
    - libxext-dev
    - libxtst-dev
    - libxkbfile-dev

language: node_js
node_js:
- '8'

cache:
  directories:
  - node_modules

script:
  - npm ci
  - npm run dist

deploy:
  provider: releases
  api_key:
    secure: "Xe0Gct0aM/0FmPfLp1vPEVlhNfY0bHn8a9+7u4TkPakVt2rWtR0OMXrlp6a9vqYemzuO82/B/0Kmof3Z1ULPQ6y8376ZebRCYoZJLIaExhDGA3cPKn34yNSgwKfxFu2OzH1VAmQF+2N6Eeb4WcrDpvV1HkqJsZRSwe2UrPCKvDrxbuoXoGhjT141mazFBj9rW62xkpskIq4sDL4Jjd3nI1c8uLV9L2JEfsXYaKq6ibo0yoW5jHCcyky7PVfBkprmT5lpAukXLzsaMTMBDja7ti8lxzOiT/VyuZ9Z1QcFyyqqAIy6Jfco41H3tcby0kiSG8ytrx2VAysLRH39QIQqTQeLuIATslGN3dRRu7k9mMOp1RseIHzwGRZqIPwGzXw9LDI9tRl2f+iRsOf8mxCjB7tel8zinRdzNWBrK9pXhs58k7FRCs66SBZEATQCGn67S6KPy+tQErZ6xyU7lyWOCTy04W7uJtiGED3yYHYyvFtmD9njRhfzya0/7zrBXCKMIYhLClG740etBj+JjW4/4kZ+F3MTyXvDAIWmFA9vaPRcmz1p2OTS4ATwOLs7gEElKKNxL2YjMf5Sb0M5tvP3FbXpOZhb8mun8FRDY4tAgR3Ozi2fyzRYKHs3pJo2YrnJ3AFjD2ur5w3n3iIEpJ6/Juvp7giCVWL0sgq+1hie6C4=" 
  skip_cleanup: true
  on:
    tags: true
